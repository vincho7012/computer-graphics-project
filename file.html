<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

  var reader;

  var openFile = function(event) {
    var input = event.target;

    reader = new FileReader();
    reader.onload = function(){
      var dataURL = reader.result;
    };
    reader.readAsDataURL(input.files[0]);
  };

  $(document).ready(function(){

    $("form[name='uploader']").submit(function(e) {

          var formData = {};
          formData.image = reader.result;
          formData.filter = $('#filter').val();
        $.ajax({
            url: "http://localhost:3000",
            type: "POST",
            data: JSON.stringify(formData),
            async: false,
            success: function (msg) {
                output.src = msg;
                input.src = reader.result;
            },
            cache: false,
            contentType: false,
            processData: false
        });

        e.preventDefault();
    });


  });
  </script>
</head>
<body>
  <form name="uploader" id="1">
    Image:<br>
    <input id ="image" name = "image" type="file" accept="image/*" onchange='openFile(event)'>
    <br><br>
    <input id ='filter' type="text" name="filter">
    <input type="submit" value="Submit">
  </form>
  <img id = 'input'>
  <img id ='output'>


</body>
</html>
